var module,countdown=function(module){"use strict";function borrowMonths(ref,shift){var prevTime=ref.getTime();return ref.setMonth(ref.getMonth()+shift),Math.round((ref.getTime()-prevTime)/MILLISECONDS_PER_DAY)}function daysPerMonth(ref){var a=ref.getTime(),b=new Date(a);return b.setMonth(ref.getMonth()+1),Math.round((b.getTime()-a)/MILLISECONDS_PER_DAY)}function daysPerYear(ref){var a=ref.getTime(),b=new Date(a);return b.setFullYear(ref.getFullYear()+1),Math.round((b.getTime()-a)/MILLISECONDS_PER_DAY)}function addToDate(ts,date){if(date=date instanceof Date||null!==date&&isFinite(date)?new Date(+date):new Date,!ts)return date;var value=+ts.value||0;return value?(date.setTime(date.getTime()+value),date):((value=+ts.milliseconds||0)&&date.setMilliseconds(date.getMilliseconds()+value),(value=+ts.seconds||0)&&date.setSeconds(date.getSeconds()+value),(value=+ts.minutes||0)&&date.setMinutes(date.getMinutes()+value),(value=+ts.hours||0)&&date.setHours(date.getHours()+value),(value=+ts.weeks||0)&&(value*=DAYS_PER_WEEK),(value+=+ts.days||0)&&date.setDate(date.getDate()+value),(value=+ts.months||0)&&date.setMonth(date.getMonth()+value),(value=+ts.millennia||0)&&(value*=CENTURIES_PER_MILLENNIUM),(value+=+ts.centuries||0)&&(value*=DECADES_PER_CENTURY),(value+=+ts.decades||0)&&(value*=YEARS_PER_DECADE),(value+=+ts.years||0)&&date.setFullYear(date.getFullYear()+value),date)}function plurality(value,unit){return formatNumber(value)+(1===value?LABELS_SINGLUAR[unit]:LABELS_PLURAL[unit])}function Timespan(){}function rippleRounded(ts,toUnit){switch(toUnit){case"seconds":if(ts.seconds!==SECONDS_PER_MINUTE||isNaN(ts.minutes))return;ts.minutes++,ts.seconds=0;case"minutes":if(ts.minutes!==MINUTES_PER_HOUR||isNaN(ts.hours))return;ts.hours++,ts.minutes=0;case"hours":if(ts.hours!==HOURS_PER_DAY||isNaN(ts.days))return;ts.days++,ts.hours=0;case"days":if(ts.days!==DAYS_PER_WEEK||isNaN(ts.weeks))return;ts.weeks++,ts.days=0;case"weeks":if(ts.weeks!==daysPerMonth(ts.refMonth)/DAYS_PER_WEEK||isNaN(ts.months))return;ts.months++,ts.weeks=0;case"months":if(ts.months!==MONTHS_PER_YEAR||isNaN(ts.years))return;ts.years++,ts.months=0;case"years":if(ts.years!==YEARS_PER_DECADE||isNaN(ts.decades))return;ts.decades++,ts.years=0;case"decades":if(ts.decades!==DECADES_PER_CENTURY||isNaN(ts.centuries))return;ts.centuries++,ts.decades=0;case"centuries":if(ts.centuries!==CENTURIES_PER_MILLENNIUM||isNaN(ts.millennia))return;ts.millennia++,ts.centuries=0}}function fraction(ts,frac,fromUnit,toUnit,conversion,digits){return ts[fromUnit]>=0&&(frac+=ts[fromUnit],delete ts[fromUnit]),(frac/=conversion)+1<=1?0:ts[toUnit]>=0?(ts[toUnit]=+(ts[toUnit]+frac).toFixed(digits),rippleRounded(ts,toUnit),0):frac}function fractional(ts,digits){var frac=fraction(ts,0,"milliseconds","seconds",MILLISECONDS_PER_SECOND,digits);if(frac&&(frac=fraction(ts,frac,"seconds","minutes",SECONDS_PER_MINUTE,digits))&&(frac=fraction(ts,frac,"minutes","hours",MINUTES_PER_HOUR,digits))&&(frac=fraction(ts,frac,"hours","days",HOURS_PER_DAY,digits))&&(frac=fraction(ts,frac,"days","weeks",DAYS_PER_WEEK,digits))&&(frac=fraction(ts,frac,"weeks","months",daysPerMonth(ts.refMonth)/DAYS_PER_WEEK,digits))&&(frac=fraction(ts,frac,"months","years",daysPerYear(ts.refMonth)/daysPerMonth(ts.refMonth),digits))&&(frac=fraction(ts,frac,"years","decades",YEARS_PER_DECADE,digits))&&(frac=fraction(ts,frac,"decades","centuries",DECADES_PER_CENTURY,digits))&&(frac=fraction(ts,frac,"centuries","millennia",CENTURIES_PER_MILLENNIUM,digits)))throw new Error("Fractional unit overflow")}function ripple(ts){var x;for(ts.milliseconds<0?(x=ceil(-ts.milliseconds/MILLISECONDS_PER_SECOND),ts.seconds-=x,ts.milliseconds+=x*MILLISECONDS_PER_SECOND):ts.milliseconds>=MILLISECONDS_PER_SECOND&&(ts.seconds+=floor(ts.milliseconds/MILLISECONDS_PER_SECOND),ts.milliseconds%=MILLISECONDS_PER_SECOND),ts.seconds<0?(x=ceil(-ts.seconds/SECONDS_PER_MINUTE),ts.minutes-=x,ts.seconds+=x*SECONDS_PER_MINUTE):ts.seconds>=SECONDS_PER_MINUTE&&(ts.minutes+=floor(ts.seconds/SECONDS_PER_MINUTE),ts.seconds%=SECONDS_PER_MINUTE),ts.minutes<0?(x=ceil(-ts.minutes/MINUTES_PER_HOUR),ts.hours-=x,ts.minutes+=x*MINUTES_PER_HOUR):ts.minutes>=MINUTES_PER_HOUR&&(ts.hours+=floor(ts.minutes/MINUTES_PER_HOUR),ts.minutes%=MINUTES_PER_HOUR),ts.hours<0?(x=ceil(-ts.hours/HOURS_PER_DAY),ts.days-=x,ts.hours+=x*HOURS_PER_DAY):ts.hours>=HOURS_PER_DAY&&(ts.days+=floor(ts.hours/HOURS_PER_DAY),ts.hours%=HOURS_PER_DAY);ts.days<0;)ts.months--,ts.days+=borrowMonths(ts.refMonth,1);ts.days>=DAYS_PER_WEEK&&(ts.weeks+=floor(ts.days/DAYS_PER_WEEK),ts.days%=DAYS_PER_WEEK),ts.months<0?(x=ceil(-ts.months/MONTHS_PER_YEAR),ts.years-=x,ts.months+=x*MONTHS_PER_YEAR):ts.months>=MONTHS_PER_YEAR&&(ts.years+=floor(ts.months/MONTHS_PER_YEAR),ts.months%=MONTHS_PER_YEAR),ts.years>=YEARS_PER_DECADE&&(ts.decades+=floor(ts.years/YEARS_PER_DECADE),ts.years%=YEARS_PER_DECADE,ts.decades>=DECADES_PER_CENTURY&&(ts.centuries+=floor(ts.decades/DECADES_PER_CENTURY),ts.decades%=DECADES_PER_CENTURY,ts.centuries>=CENTURIES_PER_MILLENNIUM&&(ts.millennia+=floor(ts.centuries/CENTURIES_PER_MILLENNIUM),ts.centuries%=CENTURIES_PER_MILLENNIUM)))}function pruneUnits(ts,units,max,digits){var count=0;!(units&MILLENNIA)||count>=max?(ts.centuries+=ts.millennia*CENTURIES_PER_MILLENNIUM,delete ts.millennia):ts.millennia&&count++,!(units&CENTURIES)||count>=max?(ts.decades+=ts.centuries*DECADES_PER_CENTURY,delete ts.centuries):ts.centuries&&count++,!(units&DECADES)||count>=max?(ts.years+=ts.decades*YEARS_PER_DECADE,delete ts.decades):ts.decades&&count++,!(units&YEARS)||count>=max?(ts.months+=ts.years*MONTHS_PER_YEAR,delete ts.years):ts.years&&count++,!(units&MONTHS)||count>=max?(ts.months&&(ts.days+=borrowMonths(ts.refMonth,ts.months)),delete ts.months,ts.days>=DAYS_PER_WEEK&&(ts.weeks+=floor(ts.days/DAYS_PER_WEEK),ts.days%=DAYS_PER_WEEK)):ts.months&&count++,!(units&WEEKS)||count>=max?(ts.days+=ts.weeks*DAYS_PER_WEEK,delete ts.weeks):ts.weeks&&count++,!(units&DAYS)||count>=max?(ts.hours+=ts.days*HOURS_PER_DAY,delete ts.days):ts.days&&count++,!(units&HOURS)||count>=max?(ts.minutes+=ts.hours*MINUTES_PER_HOUR,delete ts.hours):ts.hours&&count++,!(units&MINUTES)||count>=max?(ts.seconds+=ts.minutes*SECONDS_PER_MINUTE,delete ts.minutes):ts.minutes&&count++,!(units&SECONDS)||count>=max?(ts.milliseconds+=ts.seconds*MILLISECONDS_PER_SECOND,delete ts.seconds):ts.seconds&&count++,units&MILLISECONDS&&!(count>=max)||fractional(ts,digits)}function populate(ts,start,end,units,max,digits){var now=new Date;if(ts.start=start=start||now,ts.end=end=end||now,ts.units=units,ts.value=end.getTime()-start.getTime(),ts.value<0){var tmp=end;end=start,start=tmp}ts.refMonth=new Date(start.getFullYear(),start.getMonth(),15,12,0,0);try{ts.millennia=0,ts.centuries=0,ts.decades=0,ts.years=end.getFullYear()-start.getFullYear(),ts.months=end.getMonth()-start.getMonth(),ts.weeks=0,ts.days=end.getDate()-start.getDate(),ts.hours=end.getHours()-start.getHours(),ts.minutes=end.getMinutes()-start.getMinutes(),ts.seconds=end.getSeconds()-start.getSeconds(),ts.milliseconds=end.getMilliseconds()-start.getMilliseconds(),ripple(ts),pruneUnits(ts,units,max,digits)}finally{delete ts.refMonth}return ts}function getDelay(units){return units&MILLISECONDS?MILLISECONDS_PER_SECOND/30:units&SECONDS?MILLISECONDS_PER_SECOND:units&MINUTES?MILLISECONDS_PER_SECOND*SECONDS_PER_MINUTE:units&HOURS?MILLISECONDS_PER_SECOND*SECONDS_PER_MINUTE*MINUTES_PER_HOUR:units&DAYS?MILLISECONDS_PER_SECOND*SECONDS_PER_MINUTE*MINUTES_PER_HOUR*HOURS_PER_DAY:MILLISECONDS_PER_SECOND*SECONDS_PER_MINUTE*MINUTES_PER_HOUR*HOURS_PER_DAY*DAYS_PER_WEEK}function countdown(start,end,units,max,digits){var callback;units=+units||DEFAULTS,max=max>0?max:NaN,digits=digits>0?digits<20?Math.round(digits):20:0;var startTS=null;"function"==typeof start?(callback=start,start=null):start instanceof Date||(null!==start&&isFinite(start)?start=new Date(+start):("object"==typeof startTS&&(startTS=start),start=null));var endTS=null;if("function"==typeof end?(callback=end,end=null):end instanceof Date||(null!==end&&isFinite(end)?end=new Date(+end):("object"==typeof end&&(endTS=end),end=null)),startTS&&(start=addToDate(startTS,end)),endTS&&(end=addToDate(endTS,start)),!start&&!end)return new Timespan;if(!callback)return populate(new Timespan,start,end,units,max,digits);var timerId,delay=getDelay(units),fn=function(){callback(populate(new Timespan,start,end,units,max,digits),timerId)};return fn(),timerId=setInterval(fn,delay)}var LABELS_SINGLUAR,LABELS_PLURAL,LABEL_LAST,LABEL_DELIM,LABEL_NOW,formatter,formatNumber,formatList,MILLISECONDS=1,SECONDS=2,MINUTES=4,HOURS=8,DAYS=16,WEEKS=32,MONTHS=64,YEARS=128,DECADES=256,CENTURIES=512,MILLENNIA=1024,DEFAULTS=YEARS|MONTHS|DAYS|HOURS|MINUTES|SECONDS,MILLISECONDS_PER_SECOND=1e3,SECONDS_PER_MINUTE=60,MINUTES_PER_HOUR=60,HOURS_PER_DAY=24,MILLISECONDS_PER_DAY=HOURS_PER_DAY*MINUTES_PER_HOUR*SECONDS_PER_MINUTE*MILLISECONDS_PER_SECOND,DAYS_PER_WEEK=7,MONTHS_PER_YEAR=12,YEARS_PER_DECADE=10,DECADES_PER_CENTURY=10,CENTURIES_PER_MILLENNIUM=10,ceil=Math.ceil,floor=Math.floor;Timespan.prototype.toString=function(emptyLabel){var label=formatList(this),count=label.length;if(!count)return emptyLabel?""+emptyLabel:LABEL_NOW;if(1===count)return label[0];var last=LABEL_LAST+label.pop();return label.join(LABEL_DELIM)+last},Timespan.prototype.toHTML=function(tag,emptyLabel){tag=tag||"span";var label=formatList(this),count=label.length;if(!count)return(emptyLabel=emptyLabel||LABEL_NOW)?"<"+tag+">"+emptyLabel+"</"+tag+">":emptyLabel;for(var i=0;i<count;i++)label[i]="<"+tag+">"+label[i]+"</"+tag+">";if(1===count)return label[0];var last=LABEL_LAST+label.pop();return label.join(LABEL_DELIM)+last},Timespan.prototype.addTo=function(date){return addToDate(this,date)},formatList=function(ts){var list=[],value=ts.millennia;return value&&list.push(formatter(value,10)),(value=ts.centuries)&&list.push(formatter(value,9)),(value=ts.decades)&&list.push(formatter(value,8)),(value=ts.years)&&list.push(formatter(value,7)),(value=ts.months)&&list.push(formatter(value,6)),(value=ts.weeks)&&list.push(formatter(value,5)),(value=ts.days)&&list.push(formatter(value,4)),(value=ts.hours)&&list.push(formatter(value,3)),(value=ts.minutes)&&list.push(formatter(value,2)),(value=ts.seconds)&&list.push(formatter(value,1)),(value=ts.milliseconds)&&list.push(formatter(value,0)),list},countdown.MILLISECONDS=MILLISECONDS,countdown.SECONDS=SECONDS,countdown.MINUTES=MINUTES,countdown.HOURS=HOURS,countdown.DAYS=DAYS,countdown.WEEKS=WEEKS,countdown.MONTHS=MONTHS,countdown.YEARS=YEARS,countdown.DECADES=DECADES,countdown.CENTURIES=CENTURIES,countdown.MILLENNIA=MILLENNIA,countdown.DEFAULTS=DEFAULTS,countdown.ALL=MILLENNIA|CENTURIES|DECADES|YEARS|MONTHS|WEEKS|DAYS|HOURS|MINUTES|SECONDS|MILLISECONDS;var setFormat=countdown.setFormat=function(format){if(format){if("singular"in format||"plural"in format){var singular=format.singular||[];singular.split&&(singular=singular.split("|"));var plural=format.plural||[];plural.split&&(plural=plural.split("|"));for(var i=0;i<=10;i++)LABELS_SINGLUAR[i]=singular[i]||LABELS_SINGLUAR[i],LABELS_PLURAL[i]=plural[i]||LABELS_PLURAL[i]}"string"==typeof format.last&&(LABEL_LAST=format.last),"string"==typeof format.delim&&(LABEL_DELIM=format.delim),"string"==typeof format.empty&&(LABEL_NOW=format.empty),"function"==typeof format.formatNumber&&(formatNumber=format.formatNumber),"function"==typeof format.formatter&&(formatter=format.formatter)}},resetFormat=countdown.resetFormat=function(){LABELS_SINGLUAR=" millisecond| second| minute| hour| day| week| month| year| decade| century| millennium".split("|"),LABELS_PLURAL=" milliseconds| seconds| minutes| hours| days| weeks| months| years| decades| centuries| millennia".split("|"),LABEL_LAST=" and ",LABEL_DELIM=", ",LABEL_NOW="",formatNumber=function(value){return value},formatter=plurality};return countdown.setLabels=function(singular,plural,last,delim,empty,formatNumber,formatter){setFormat({singular:singular,plural:plural,last:last,delim:delim,empty:empty,formatNumber:formatNumber,formatter:formatter})},countdown.resetLabels=resetFormat,resetFormat(),module&&module.exports?module.exports=countdown:"function"==typeof window.define&&void 0!==window.define.amd&&window.define("countdown",[],function(){return countdown}),countdown}(module);